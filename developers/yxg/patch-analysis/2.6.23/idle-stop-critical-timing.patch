---
 drivers/acpi/processor_idle.c |    8 ++++++++
 1 file changed, 8 insertions(+)

Index: linux-2.6.23-rt1/drivers/acpi/processor_idle.c
===================================================================
--- linux-2.6.23-rt1.orig/drivers/acpi/processor_idle.c	2007-10-11 15:59:52.000000000 -0400
+++ linux-2.6.23-rt1/drivers/acpi/processor_idle.c	2007-10-11 16:00:08.000000000 -0400
@@ -761,6 +761,12 @@ static inline void acpi_idle_update_bm_r
  */
 static inline void acpi_idle_do_entry(struct acpi_processor_cx *cx)
 {
+	/*
+	 * We have irqs disabled here, so stop latency tracing
+	 * at this point and restart it after we return:
+	 */
+	stop_critical_timing();
+
 	if (cx->space_id == ACPI_CSTATE_FFH) {
 		/* Call into architectural FFH based C-state */
 		acpi_processor_ffh_cstate_enter(cx);
@@ -773,6 +779,8 @@ static inline void acpi_idle_do_entry(st
 		   gets asserted in time to freeze execution properly. */
 		unused = inl(acpi_gbl_FADT.xpm_timer_block.address);
 	}
+
+	touch_critical_timing();
 }
 
 /**
